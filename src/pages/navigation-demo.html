<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Navigation System Demo - Japan Life Guide</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico" />
    <link rel="stylesheet" href="../css/main.css" />
    <style>
      .demo-section {
        background: #f8f9fa;
        padding: 2rem;
        margin: 2rem 0;
        border-radius: 8px;
        border-left: 4px solid #007bff;
      }
      .demo-section h3 {
        color: #007bff;
        margin-top: 0;
      }
      .code-block {
        background: #f1f3f4;
        padding: 1rem;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        overflow-x: auto;
      }
      .success {
        color: #28a745;
        font-weight: bold;
      }
      .status-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 8px;
      }
      .status-success {
        background-color: #28a745;
      }
      .status-loading {
        background-color: #ffc107;
      }
      .status-error {
        background-color: #dc3545;
      }
    </style>
  </head>
  <body>
    <header>
      <!-- å¯¼èˆªæ å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
    </header>

    <main>
      <h1>å¯¼èˆªæ æ¨¡æ¿ç³»ç»Ÿæ¼”ç¤ºé¡µé¢</h1>

      <div class="demo-section">
        <h3>ğŸš€ ç³»ç»ŸçŠ¶æ€</h3>
        <p id="system-status">
          <span class="status-indicator status-loading"></span>
          æ­£åœ¨åˆå§‹åŒ–å¯¼èˆªç³»ç»Ÿ...
        </p>
      </div>

      <div class="demo-section">
        <h3>ğŸ“‹ å½“å‰å¯¼èˆªé…ç½®</h3>
        <div id="nav-config" class="code-block">åŠ è½½ä¸­...</div>
      </div>

      <div class="demo-section">
        <h3>ğŸ¯ å½“å‰é¡µé¢ä¿¡æ¯</h3>
        <ul id="page-info">
          <li>é¡µé¢ä½ç½®: <span id="page-location">æ£€æµ‹ä¸­...</span></li>
          <li>å½“å‰é¡µé¢: <span id="current-page">æ£€æµ‹ä¸­...</span></li>
          <li>é¡µé¢è·¯å¾„: <span id="page-path">æ£€æµ‹ä¸­...</span></li>
        </ul>
      </div>

      <div class="demo-section">
        <h3>ğŸ› ï¸ åŠ¨æ€ç®¡ç†æ¼”ç¤º</h3>
        <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ¥æµ‹è¯•åŠ¨æ€æ·»åŠ /ç§»é™¤å¯¼èˆªé¡¹åŠŸèƒ½ï¼š</p>
        <button
          onclick="addTestNavItem()"
          style="
            margin: 5px;
            padding: 8px 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
          "
        >
          æ·»åŠ æµ‹è¯•é¡µé¢
        </button>
        <button
          onclick="removeTestNavItem()"
          style="
            margin: 5px;
            padding: 8px 16px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
          "
        >
          ç§»é™¤æµ‹è¯•é¡µé¢
        </button>
        <button
          onclick="updateNavOrder()"
          style="
            margin: 5px;
            padding: 8px 16px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
          "
        >
          é‡æ–°æ’åº
        </button>
      </div>

      <div class="demo-section">
        <h3>ğŸ“± ç³»ç»Ÿç‰¹æ€§</h3>
        <ul>
          <li>âœ… è‡ªåŠ¨è·¯å¾„æ£€æµ‹å’Œå¤„ç†</li>
          <li>âœ… æ´»åŠ¨é¡µé¢çŠ¶æ€é«˜äº®</li>
          <li>âœ… å¤šè¯­è¨€æ”¯æŒ</li>
          <li>âœ… å“åº”å¼è®¾è®¡</li>
          <li>âœ… åŠ¨æ€å¯¼èˆªç®¡ç†</li>
          <li>âœ… å‘åå…¼å®¹</li>
        </ul>
      </div>

      <div class="demo-section">
        <h3>ğŸ’¡ ä½¿ç”¨è¯´æ˜</h3>
        <p>
          è¿™ä¸ªé¡µé¢å±•ç¤ºäº†æ–°çš„å¯¼èˆªæ æ¨¡æ¿ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å¯¼èˆªæ ç°åœ¨å®Œå…¨é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆï¼Œè¿™æ„å‘³ç€ï¼š
        </p>
        <ul>
          <li>åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹(navigation-config.json)ä¿®æ”¹å¯¼èˆªé…ç½®</li>
          <li>æ‰€æœ‰é¡µé¢çš„å¯¼èˆªæ ä¼šè‡ªåŠ¨ä¿æŒä¸€è‡´</li>
          <li>å¯ä»¥åŠ¨æ€æ·»åŠ ã€ç§»é™¤æˆ–ä¿®æ”¹å¯¼èˆªé¡¹</li>
          <li>æ”¯æŒä¸åŒä½ç½®é¡µé¢çš„è‡ªåŠ¨è·¯å¾„å¤„ç†</li>
        </ul>
      </div>
    </main>

    <footer>
      <p data-i18n="footer.copyright">&copy; 2025 æ—¥æœ¬ç”Ÿæ´»ã‚¬ã‚¤ãƒ‰</p>
    </footer>

    <script src="../js/navigation-generator.js"></script>
    <script src="../js/navigation-init.js"></script>
    <script src="../js/main.js"></script>

    <script>
      // æ¼”ç¤ºé¡µé¢ç‰¹æœ‰çš„è„šæœ¬
      let testNavAdded = false;

      // ç›‘å¬å¯¼èˆªç”Ÿæˆå®Œæˆäº‹ä»¶
      document.addEventListener('navigationGenerated', function (event) {
        updateSystemStatus('success', 'å¯¼èˆªç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼');
        displayNavigationConfig(event.detail.navigationConfig);
        displayPageInfo();
      });

      function updateSystemStatus(status, message) {
        const statusElement = document.getElementById('system-status');
        const indicator = statusElement.querySelector('.status-indicator');

        indicator.className = `status-indicator status-${status}`;
        statusElement.innerHTML = indicator.outerHTML + message;
      }

      function displayNavigationConfig(config) {
        const configElement = document.getElementById('nav-config');
        configElement.textContent = JSON.stringify(config, null, 2);
      }

      function displayPageInfo() {
        const generator = window.navigationManager?.generator;
        if (generator) {
          document.getElementById('page-location').textContent =
            generator.isInPagesFolder ? 'pagesç›®å½•' : 'æ ¹ç›®å½•';
          document.getElementById('current-page').textContent =
            generator.currentPage;
          document.getElementById('page-path').textContent =
            window.location.pathname;
        }
      }

      function addTestNavItem() {
        if (!testNavAdded) {
          window.navigationManager.addItem('demo', {
            href: './pages/demo.html',
            hrefFromPages: './demo.html',
            i18nKey: 'nav.demo',
            order: 7
          });
          testNavAdded = true;
          alert('æµ‹è¯•å¯¼èˆªé¡¹å·²æ·»åŠ ï¼');
        } else {
          alert('æµ‹è¯•å¯¼èˆªé¡¹å·²å­˜åœ¨ï¼');
        }
      }

      function removeTestNavItem() {
        if (testNavAdded) {
          window.navigationManager.removeItem('demo');
          testNavAdded = false;
          alert('æµ‹è¯•å¯¼èˆªé¡¹å·²ç§»é™¤ï¼');
        } else {
          alert('æµ‹è¯•å¯¼èˆªé¡¹ä¸å­˜åœ¨ï¼');
        }
      }

      function updateNavOrder() {
        // æ›´æ–°ä¸­å›½æ–‡åŒ–é¡µé¢çš„é¡ºåº
        window.navigationManager.updateItem('chinese_culture', { order: 3 });
        alert('å¯¼èˆªé¡ºåºå·²æ›´æ–°ï¼ä¸­å›½æ–‡åŒ–é¡µé¢ç§»åŠ¨åˆ°ç¬¬3ä½ã€‚');
      }

      // é”™è¯¯å¤„ç†
      window.addEventListener('error', function (event) {
        updateSystemStatus('error', 'ç³»ç»Ÿå‡ºç°é”™è¯¯: ' + event.message);
      });

      // æ£€æŸ¥æ˜¯å¦æœ‰å¿…è¦çš„è„šæœ¬åŠ è½½å¤±è´¥
      setTimeout(() => {
        if (!window.NavigationGenerator) {
          updateSystemStatus('error', 'å¯¼èˆªç”Ÿæˆå™¨æœªèƒ½åŠ è½½ï¼');
        }
      }, 3000);
    </script>
  </body>
</html>
